<ion-content [fullscreen]="true" class="ion-padding">
  <ion-card>
    <ion-card-content>
      <form [formGroup]="registerForm" (ngSubmit)="onRegister()">
        <div class="form-fields">
          <ion-item>
            <ion-label position="floating">Email</ion-label>
            <ion-input type="email" formControlName="email"></ion-input>
          </ion-item>
          <div class="error-container" *ngIf="registerForm.get('email')?.touched">
            <div class="error-message" *ngIf="registerForm.get('email')?.hasError('required')">
              Email est requis
            </div>
            <div class="error-message" *ngIf="registerForm.get('email')?.hasError('email')">
              Format email invalide
            </div>
          </div>

          <ion-item>
            <ion-label position="floating">Mot de passe</ion-label>
            <ion-input type="password" formControlName="password"></ion-input>
          </ion-item>
          <div class="error-container" *ngIf="registerForm.get('password')?.touched">
            <div class="error-message" *ngIf="registerForm.get('password')?.hasError('required')">
              Mot de passe requis
            </div>
            <div class="error-message" *ngIf="registerForm.get('password')?.hasError('minLength')">
              Minimum 12 caractères
            </div>
            <div class="error-message" *ngIf="registerForm.get('password')?.hasError('pattern')">
              Le mot de passe doit contenir : majuscule, minuscule, chiffre et caractère spécial
            </div>
          </div>

          <ion-item>
            <ion-label position="floating">Confirmer le mot de passe</ion-label>
            <ion-input type="password" formControlName="confirmPassword"></ion-input>
          </ion-item>
          <div class="error-container" *ngIf="registerForm.get('confirmPassword')?.touched">
            <div class="error-message" *ngIf="registerForm.hasError('passwordMismatch')">
              Les mots de passe ne correspondent pas
            </div>
          </div>
        </div>

        <div class="form-buttons">
          <ion-button expand="block" type="submit" [disabled]="registerForm.invalid">
            S'inscrire
          </ion-button>
          
          <ion-button expand="block" fill="clear" routerLink="/login">
            Déjà un compte ? Connectez-vous
          </ion-button>
          
          <ion-button expand="block" fill="clear" routerLink="/login">
            Mot de passe oublié ?
          </ion-button>
        </div>
      </form>

      <ion-text color="danger" *ngIf="errorMessage">
        <p>{{ errorMessage }}</p>
      </ion-text>
    </ion-card-content>
  </ion-card>
</ion-content>